<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××©×—×§ ×§×œ×¤×™ ××•×¦×¨ ××™×œ×™× - ×× ×’×œ×™×ª-×¢×‘×¨×™×ª</title>
    <link rel="stylesheet" href="vocabulary-games-styles.css">
</head>
<body>
    <div class="container">
        <h1>ğŸ´ ×§×œ×¤×™ ××•×¦×¨ ××™×œ×™×</h1>
        
        <!-- Score Display -->
        <div class="score-container">
            <div class="score-box">
                <div class="score-label">âœ… × ×›×•×Ÿ</div>
                <div class="score-value correct" id="correctScore">0</div>
            </div>
            <div class="score-box">
                <div class="score-label">âŒ ×œ× × ×›×•×Ÿ</div>
                <div class="score-value wrong" id="wrongScore">0</div>
            </div>
        </div>

        <!-- Progress Indicator -->
        <div class="progress-indicator" id="progress">×§×œ×£ 1 ××ª×•×š 40</div>

        <!-- Flashcard -->
        <div class="card-container">
            <div class="card" id="card" onclick="flipCard()">
                <div class="card-face card-front">
                    <div class="word-display word-english" id="question"></div>
                    <button class="speaker-button" onclick="event.stopPropagation(); speak('en')">ğŸ”Š</button>
                </div>
                <div class="card-face card-back">
                    <div class="word-display word-hebrew" id="answer"></div>
                    <button class="speaker-button" onclick="event.stopPropagation(); speak('he')">ğŸ”Š</button>
                </div>
            </div>
        </div>

        <!-- Control Buttons -->
        <div class="btn-group">
            <button class="btn btn-success" onclick="markCorrect()">âœ“ ×™×“×¢×ª×™</button>
            <button class="btn btn-primary" onclick="flipCard()">ğŸ”„ ×”×¤×•×š ×§×œ×£</button>
            <button class="btn btn-danger" onclick="markWrong()">âœ— ×œ× ×™×“×¢×ª×™</button>
        </div>

        <div class="btn-group mt-20">
            <button class="btn btn-info" onclick="nextCard()">â¡ï¸ ×”×‘×</button>
            <button class="btn btn-warning" onclick="previousCard()">â¬…ï¸ ×”×§×•×“×</button>
            <button class="btn btn-secondary" onclick="shuffleCards()">ğŸ”€ ×¢×¨×‘×‘</button>
        </div>

        <!-- Results Section (Initially Hidden) -->
        <div id="results" class="results-container hidden">
            <h2 class="results-title">ğŸ‰ ×¡×™×™××ª ××ª ×›×œ ×”×§×œ×¤×™×!</h2>
            <div class="results-stats">
                <div class="result-item">
                    <div class="result-number" style="color: #48bb78;" id="finalCorrect">0</div>
                    <div class="result-label">×ª×©×•×‘×•×ª × ×›×•× ×•×ª</div>
                </div>
                <div class="result-item">
                    <div class="result-number" style="color: #f56565;" id="finalWrong">0</div>
                    <div class="result-label">×ª×©×•×‘×•×ª ×©×’×•×™×•×ª</div>
                </div>
            </div>
            <div class="percentage" id="percentage">0%</div>
            <div class="btn-group mt-20">
                <button class="btn btn-primary" onclick="retryWrong()">ğŸ” ×ª×¨×’×œ ××™×œ×™× ×©×˜×¢×™×ª</button>
                <button class="btn btn-secondary" onclick="restartGame()">ğŸ® ×”×ª×—×œ ××—×“×©</button>
            </div>
        </div>
    </div>

    <script>
        // Vocabulary data
        const vocabulary = [
            { english: "degree", hebrew: "×ª×•××¨" },
            { english: "excited", hebrew: "× ×¨×’×©" },
            { english: "nervous", hebrew: "×¢×¦×‘× ×™" },
            { english: "semester", hebrew: "×¡××¡×˜×¨" },
            { english: "though", hebrew: "××£ ×¢×œ ×¤×™, ×œ××¨×•×ª" },
            { english: "although", hebrew: "×œ××¨×•×ª ×©, ××£ ×¢×œ ×¤×™ ×©" },
            { english: "abroad", hebrew: "×‘×—×•×´×œ" },
            { english: "advice", hebrew: "×¢×¦×”" },
            { english: "miss", hebrew: "×œ×”×ª×’×¢×’×¢, ×œ×¤×¡×¤×¡" },
            { english: "accept", hebrew: "×œ×§×‘×œ" },
            { english: "several", hebrew: "×›××”, ××¡×¤×¨" },
            { english: "internship", hebrew: "×”×ª××—×•×ª" },
            { english: "whether", hebrew: "×”××, ×‘×™×Ÿ ××" },
            { english: "either", hebrew: "×’×, ××—×“ ××©× ×™×™×" },
            { english: "neither", hebrew: "××£ ××—×“ ××©× ×™×™×" },
            { english: "responsibility", hebrew: "××—×¨×™×•×ª" },
            { english: "anxious", hebrew: "×—×¨×“, ×“×•××’" },
            { english: "definitely", hebrew: "×‘×”×—×œ×˜" },
            { english: "diploma", hebrew: "×ª×¢×•×“×”" },
            { english: "involve", hebrew: "×œ×›×œ×•×œ, ×œ×¢×¨×‘" },
            { english: "by", hebrew: "×œ×™×“, ×¢×œ ×™×“×™" },
            { english: "local", hebrew: "××§×•××™" },
            { english: "open (v)", hebrew: "×œ×¤×ª×•×—" },
            { english: "opportunity", hebrew: "×”×–×“×× ×•×ª" },
            { english: "perform", hebrew: "×œ×‘×¦×¢, ×œ×”×•×¤×™×¢" },
            { english: "reason", hebrew: "×¡×™×‘×”" },
            { english: "regret", hebrew: "×œ×”×¦×˜×¢×¨, ×—×¨×˜×”" },
            { english: "sense", hebrew: "×—×•×©, ×”×’×™×•×Ÿ" },
            { english: "suppose", hebrew: "×œ×”× ×™×—" },
            { english: "towards", hebrew: "×œ×›×™×•×•×Ÿ, ×›×œ×¤×™" },
            { english: "afraid", hebrew: "××¤×—×“" },
            { english: "anymore", hebrew: "×™×•×ª×¨, ×¢×•×“" },
            { english: "appreciate", hebrew: "×œ×”×¢×¨×™×š" },
            { english: "challenge", hebrew: "××ª×’×¨" },
            { english: "contact", hebrew: "×§×©×¨, ×œ×™×¦×•×¨ ×§×©×¨" },
            { english: "entire", hebrew: "×›×•×œ×•, ×©×œ×" },
            { english: "figure out", hebrew: "×œ×”×‘×™×Ÿ, ×œ×¤×ª×•×¨" },
            { english: "huge", hebrew: "×¢× ×§" },
            { english: "industry", hebrew: "×ª×¢×©×™×™×”" },
            { english: "instead", hebrew: "×‘××§×•×" }
        ];

        let currentIndex = 0;
        let cards = [];
        let correctCount = 0;
        let wrongCount = 0;
        let wrongCards = [];
        let isRetryMode = false;

        // Shuffle function
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // Initialize with shuffled cards
        function initializeGame() {
            cards = shuffleArray([...vocabulary]);
            currentIndex = 0;
            correctCount = 0;
            wrongCount = 0;
            wrongCards = [];
            isRetryMode = false;
            updateScores();
            displayCard();
        }

        // Display current card
        function displayCard() {
            if (currentIndex >= cards.length) {
                showResults();
                return;
            }

            const card = cards[currentIndex];
            document.getElementById('question').textContent = card.english;
            document.getElementById('answer').textContent = card.hebrew;
            document.getElementById('progress').textContent = `×§×œ×£ ${currentIndex + 1} ××ª×•×š ${cards.length}`;
            
            // Always reset to front (English side)
            const cardElement = document.getElementById('card');
            cardElement.classList.remove('flipped');
        }

        // Flip card
        function flipCard() {
            document.getElementById('card').classList.toggle('flipped');
        }

        // Mark as correct
        function markCorrect() {
            if (currentIndex < cards.length) {
                correctCount++;
                updateScores();
                nextCard();
            }
        }

        // Mark as wrong
        function markWrong() {
            if (currentIndex < cards.length) {
                wrongCount++;
                wrongCards.push(cards[currentIndex]);
                updateScores();
                nextCard();
            }
        }

        // Next card
        function nextCard() {
            if (currentIndex < cards.length - 1) {
                currentIndex++;
                displayCard();
            } else {
                showResults();
            }
        }

        // Previous card
        function previousCard() {
            if (currentIndex > 0) {
                currentIndex--;
                displayCard();
            }
        }

        // Shuffle cards
        function shuffleCards() {
            cards = shuffleArray(cards);
            currentIndex = 0;
            displayCard();
        }

        // Update scores
        function updateScores() {
            document.getElementById('correctScore').textContent = correctCount;
            document.getElementById('wrongScore').textContent = wrongCount;
        }

        // Show results
        function showResults() {
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('finalCorrect').textContent = correctCount;
            document.getElementById('finalWrong').textContent = wrongCount;
            
            const total = correctCount + wrongCount;
            const percentage = total > 0 ? Math.round((correctCount / total) * 100) : 0;
            document.getElementById('percentage').textContent = percentage + '%';
        }

        // Retry wrong cards
        function retryWrong() {
            if (wrongCards.length > 0) {
                cards = shuffleArray([...wrongCards]);
                currentIndex = 0;
                correctCount = 0;
                wrongCount = 0;
                wrongCards = [];
                isRetryMode = true;
                updateScores();
                document.getElementById('results').classList.add('hidden');
                displayCard();
            }
        }

        // Restart game
        function restartGame() {
            document.getElementById('results').classList.add('hidden');
            initializeGame();
        }

        // Text to speech
        function speak(lang) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance();
                const cardElement = document.getElementById('card');
                
                if (lang === 'en') {
                    utterance.text = document.getElementById('question').textContent;
                    utterance.lang = 'en-US';
                } else {
                    utterance.text = document.getElementById('answer').textContent;
                    utterance.lang = 'he-IL';
                }
                
                utterance.rate = 0.9;
                speechSynthesis.speak(utterance);
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case ' ':
                case 'Enter':
                    e.preventDefault();
                    flipCard();
                    break;
                case 'ArrowRight':
                    e.preventDefault();
                    nextCard();
                    break;
                case 'ArrowLeft':
                    e.preventDefault();
                    previousCard();
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    markCorrect();
                    break;
                case 'ArrowDown':
                    e.preventDefault();
                    markWrong();
                    break;
            }
        });

        // Initialize game on load
        initializeGame();
    </script>
</body>
</html>
